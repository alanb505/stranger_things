{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alanb\\\\Desktop\\\\courseWork\\\\stranger_things\\\\src\\\\components\\\\LoginForm.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst LoginForm = props => {\n  _s();\n\n  const [error, setError] = useState();\n  const isLogIn = props.isLogIn;\n  const setToken = props.setToken;\n\n  const onSubmit = e => {\n    const fData = new FormData(e.target);\n    e.preventDefault();\n    const userName = fData.get(\"username\");\n    const password = fData.get(\"password\");\n    const confirmPassword = fData.get(\"confirmPassword\");\n    fetch(`https://strangers-things.herokuapp.com/api/2204-ftb-mt-web-pt/users/${isLogIn ? \"login\" : \"register\"}`, {\n      method: \"POST\",\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        user: {\n          username: userName,\n          password\n        }\n      })\n    }).then(response => response.json()).then(data => {\n      if (data.success) {\n        const token = data.data.token;\n        window.localStorage.setItem(\"token\", token);\n        setToken(token);\n        window.location = \"/\";\n      } else {\n        setError(data.error.message);\n      }\n    }).catch(console.error);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: onSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"username\",\n        required: true,\n        min: 3,\n        placeholder: \"Username\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        required: true,\n        min: 6,\n        placeholder: \" Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 13\n      }, this), !isLogIn && /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        name: \"confirmPassword\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 26\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 12\n  }, this);\n};\n\n_s(LoginForm, \"ohCv/qX5Qvv7Cjn7EU0ICsWDpi4=\");\n\n_c = LoginForm;\nexport default LoginForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginForm\");","map":{"version":3,"names":["useState","LoginForm","props","error","setError","isLogIn","setToken","onSubmit","e","fData","FormData","target","preventDefault","userName","get","password","confirmPassword","fetch","method","headers","body","JSON","stringify","user","username","then","response","json","data","success","token","window","localStorage","setItem","location","message","catch","console"],"sources":["C:/Users/alanb/Desktop/courseWork/stranger_things/src/components/LoginForm.js"],"sourcesContent":["import { useState } from \"react\"\r\nconst LoginForm = ((props)=>{\r\n    const [error, setError] = useState()\r\n    const isLogIn = props.isLogIn\r\n   const setToken = props.setToken\r\n    const onSubmit = ((e)=>{\r\n        const fData= new FormData(\r\n            e.target\r\n        )\r\n        e.preventDefault(\r\n\r\n        )\r\n        const userName = fData.get(\"username\")\r\n        const password = fData.get(\"password\")\r\n        const confirmPassword = fData.get(\"confirmPassword\")\r\n            fetch (`https://strangers-things.herokuapp.com/api/2204-ftb-mt-web-pt/users/${isLogIn ? \"login\": \"register\" }`,\r\n            {\r\n                method: \"POST\",\r\n                headers: {\r\n                  'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                  user: {\r\n                    username: userName,\r\n                    password\r\n                  }\r\n                })\r\n            }\r\n            )\r\n            .then(response => response.json())\r\n            .then((data) => {\r\n                if (data.success) {\r\n                    \r\n               \r\n                const token = data.data.token\r\n                window.localStorage.setItem(\"token\", token)\r\n                setToken(token)\r\n                window.location = \"/\"\r\n            }\r\n            else {\r\n                setError(data.error.message)\r\n            }\r\n         })\r\n            .catch(console.error)\r\n    })\r\n    return <div>\r\n        <form onSubmit={onSubmit}>\r\n            <input type= \"text\" name= \"username\" required min={3} placeholder=\"Username\"></input>\r\n            <input type=\"password\" name= \"password\" required min={6} placeholder = \" Password\"></input>\r\n            {!isLogIn && <input type=\"password\" name =\"confirmPassword\" required></input>}\r\n            <button>Submit</button>\r\n            <p>{error}</p>\r\n        </form>\r\n    </div>\r\n})\r\n\r\nexport default LoginForm;"],"mappings":";;;AAAA,SAASA,QAAT,QAAyB,OAAzB;;;AACA,MAAMC,SAAS,GAAKC,KAAD,IAAS;EAAA;;EACxB,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBJ,QAAQ,EAAlC;EACA,MAAMK,OAAO,GAAGH,KAAK,CAACG,OAAtB;EACD,MAAMC,QAAQ,GAAGJ,KAAK,CAACI,QAAvB;;EACC,MAAMC,QAAQ,GAAKC,CAAD,IAAK;IACnB,MAAMC,KAAK,GAAE,IAAIC,QAAJ,CACTF,CAAC,CAACG,MADO,CAAb;IAGAH,CAAC,CAACI,cAAF;IAGA,MAAMC,QAAQ,GAAGJ,KAAK,CAACK,GAAN,CAAU,UAAV,CAAjB;IACA,MAAMC,QAAQ,GAAGN,KAAK,CAACK,GAAN,CAAU,UAAV,CAAjB;IACA,MAAME,eAAe,GAAGP,KAAK,CAACK,GAAN,CAAU,iBAAV,CAAxB;IACIG,KAAK,CAAG,uEAAsEZ,OAAO,GAAG,OAAH,GAAY,UAAY,EAAxG,EACL;MACIa,MAAM,EAAE,MADZ;MAEIC,OAAO,EAAE;QACP,gBAAgB;MADT,CAFb;MAKIC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;QACnBC,IAAI,EAAE;UACJC,QAAQ,EAAEX,QADN;UAEJE;QAFI;MADa,CAAf;IALV,CADK,CAAL,CAcCU,IAdD,CAcMC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EAdlB,EAeCF,IAfD,CAeOG,IAAD,IAAU;MACZ,IAAIA,IAAI,CAACC,OAAT,EAAkB;QAGlB,MAAMC,KAAK,GAAGF,IAAI,CAACA,IAAL,CAAUE,KAAxB;QACAC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,OAA5B,EAAqCH,KAArC;QACAxB,QAAQ,CAACwB,KAAD,CAAR;QACAC,MAAM,CAACG,QAAP,GAAkB,GAAlB;MACH,CAPG,MAQC;QACD9B,QAAQ,CAACwB,IAAI,CAACzB,KAAL,CAAWgC,OAAZ,CAAR;MACH;IACH,CA3BE,EA4BCC,KA5BD,CA4BOC,OAAO,CAAClC,KA5Bf;EA6BP,CAvCD;;EAwCA,oBAAO;IAAA,uBACH;MAAM,QAAQ,EAAEI,QAAhB;MAAA,wBACI;QAAO,IAAI,EAAE,MAAb;QAAoB,IAAI,EAAE,UAA1B;QAAqC,QAAQ,MAA7C;QAA8C,GAAG,EAAE,CAAnD;QAAsD,WAAW,EAAC;MAAlE;QAAA;QAAA;QAAA;MAAA,QADJ,eAEI;QAAO,IAAI,EAAC,UAAZ;QAAuB,IAAI,EAAE,UAA7B;QAAwC,QAAQ,MAAhD;QAAiD,GAAG,EAAE,CAAtD;QAAyD,WAAW,EAAG;MAAvE;QAAA;QAAA;QAAA;MAAA,QAFJ,EAGK,CAACF,OAAD,iBAAY;QAAO,IAAI,EAAC,UAAZ;QAAuB,IAAI,EAAE,iBAA7B;QAA+C,QAAQ;MAAvD;QAAA;QAAA;QAAA;MAAA,QAHjB,eAII;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAJJ,eAKI;QAAA,UAAIF;MAAJ;QAAA;QAAA;QAAA;MAAA,QALJ;IAAA;MAAA;MAAA;MAAA;IAAA;EADG;IAAA;IAAA;IAAA;EAAA,QAAP;AASH,CArDD;;GAAMF,S;;KAAAA,S;AAuDN,eAAeA,SAAf"},"metadata":{},"sourceType":"module"}